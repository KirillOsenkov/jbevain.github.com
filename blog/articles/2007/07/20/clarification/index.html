<!doctype html>
<html>
  <head>
    <title>evain.net  - Clarification</title>
    <meta charset="utf-8" />
    <style> body { font-family: "Consolas", Monaco, "Courier New", Courier, mono, serif; } </style>
  </head>
  <body>
<div class="container">
  <h1>Clarification <small>20 Jul 2007</small></h1>
  <hr />
  <div class="row">
    <div class="span16">
      <a href="http://www.flickr.com/photos/jbevain/529508207/" title="Photo Sharing"><img src="http://farm1.static.flickr.com/231/529508207_3edaf42ecd.jpg" width="500" height="333" alt="Light" style="border: 2px solid black;"/></a>
<br /><br />
Eight days ago, I've <a href="http://evain.net/blog/articles/2007/07/12/cecil-ildasm-and-the-security-update">blogged about an issue involving Cecil and ildasm</a>. And the last security update to the .net framework.<br />
<br />
After a few hours of investigation, I've managed to be able to reproduce the ildasm crash. It turns out that the security update is actually not involved in the issue. It's just that I stumbled upon right after the security update, and that I had not experienced it before.<br />
<br />
So, the ildasm crash happened when I was disassembling an assembly that I had just round-tripped. The issue is that in the same folder as the new assembly, there was the pdb file that was going along the assembly. So when Cecil re-writes the assembly, the methods identifiers are re-generated, and the pdb which keep track of them, becomes out of sync. ildasm uses the pdb file to read the variable names, and other infos. So when it tries to read them from the pdb, which doesn't match the assembly, it may crash.<br />
<br />
You can read the <a href="https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=287089">bug reported at Microsoft</a>. It's somewhat a corner case, so it's not really critical. But if ever you face the same symptoms while disassembling an assembly generated by Cecil, you can try to delete the pdb.<br />
<br />

    </div>
  </div>
</div>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-369117-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>

    <link type="text/css" rel="stylesheet" href="/css/SyntaxHighlighter.css"></link> 
    <script language="javascript" src="/js/shCore.js"></script> 
    <script language="javascript" src="/js/shBrushCSharp.js"></script> 
    <script language="javascript"> 
      dp.SyntaxHighlighter.ClipboardSwf = "/js/clipboard.swf";
      dp.SyntaxHighlighter.HighlightAll("code");
    </script>
  </body>
</html>
